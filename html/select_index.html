<!DOCTYPE html>
<html>
<head>
    <META http-equiv="Content-Type" content="text/html; charset=gb2312">
    <title>%s 远程图像压缩选择</title>
</head>
<body>
    <table width=100%%>
        <tr>
            <td nowrap>
                <table bgcolor="#AABBCC" width=300 align=center><tr><td nowrap><b><center><font size=4 color=#1a1a0a> %s </font></center></b></td></tr></table><br />
                <br><br><div style="font-size:15px; bgcolor:#F03450;">
                    <b><font size=3 color=#575011>&nbsp;&nbsp;音频压缩带宽: </font></b>
                    &nbsp;&nbsp;<input id="audio_rate" type="text" style="width:40px;" />Kbps
                </div>
                <br><div style="font-size:15px; bgcolor:#F03450;">
                    <b><font size=3 color=#aa0011>&nbsp;&nbsp;图像压缩方式：</font></b>
                    <font size=1>&nbsp; ( 使用javascript解码；h264视频使用h264bsd开源库，mpeg1视频和mp2音频采用jsmpeg开源库 )</font>
                </div><br />
                <table style="font-size:14px;" border="0" bgcolor="#d1d1e1" width="100%%">
                    <tr>
                        <td width=40 nowrap>1.&nbsp;&nbsp;&nbsp;&nbsp;</td>
                        <td width=100 nowrap><font style="font-size:20px;"><a href="javascript:void(0)" onclick="mjpg_go()">MJPG</a> &nbsp;</font></td>
                        <td nowrap width=180>JPEG压缩率(1%%-100%%)&nbsp;<br /><input id="mjpg_rate" type="text" style="width:25px" />%% </td>
                        <td nowrap>使用JPEG图片流，占用带宽高，<br />但是在手机等移动设备的浏览器里比较流畅</td>
                    </tr>
                    <tr><td nowrap>&nbsp;</td></tr>
                    <tr>
                        <td width=40 nowrap>2.&nbsp;&nbsp;&nbsp;&nbsp;</td>
                        <td width=100 nowrap><font style="font-size:20px;"><a href="javascript:void(0)" onclick="h264_go()">H.264</a> &nbsp;</font></td>
                        <td nowrap width=180>压缩带宽(Mbps)<br /><input id="h264_rate" type="text" style="width:40px" />Mbps</td>
                        <td nowrap>使用 H.264压缩，占用带宽低，但是CPU占有率高<br />在手机等移动设备的浏览器里有很大延迟</td>
                    </tr>
                    <tr><td nowrap>&nbsp;</td></tr>
                    <tr>
                        <td width=40 nowrap>3.&nbsp;&nbsp;&nbsp;&nbsp;</td>
                        <td width=100 nowrap><font style="font-size:20px;"><a href="javascript:void(0)" onclick="mpeg1_go()">MPEG1</a> &nbsp;</font></td>
                        <td nowrap width=180>压缩带宽(Mbps)<br /><input id="mpeg1_rate" type="text" style="width:40px" />Mbps</td>
                        <td nowrap>使用 MPEG1压缩，占用带宽低，但是CPU占有率高<br />在手机等移动设备的浏览器里有很大延迟</td>
                    </tr>
                    <tr><td nowrap>&nbsp;</td></tr>
                </table>
            </td>
        </tr>
        <tr><td nowrap><br><center><font color=#223377 size=2>&nbsp;&nbsp;CopyRight 2017 Fanxiushu </font></center></td></tr>
    </table>
    <script>
        function getQueryString(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return unescape(r[2]); return null;
        }
        document.getElementById('audio_rate').value = %d;
        document.getElementById('mjpg_rate').value = %.2f;
        document.getElementById('h264_rate').value = %.2f;
        document.getElementById('mpeg1_rate').value = %.2f;
        function mjpg_go() {
            window.location.href = "/htmlvideo?id=" + getQueryString("id") + "&compress=mjpg&videorate=" + mjpg_rate.value + "&audiorate=" + audio_rate.value * 1000;
        }
        function h264_go() {
            window.location.href = "/htmlvideo?id=" + getQueryString("id") + "&compress=h264&videorate=" + h264_rate.value * 1024 * 1024 + "&audiorate=" + audio_rate.value * 1000;
        }
        function mpeg1_go() {
            window.location.href = "/htmlvideo?id=" + getQueryString("id") + "&compress=mpeg1&videorate=" + mpeg1_rate.value * 1024 * 1024 + "&audiorate=" + audio_rate.value * 1000;
        }
    </script>
</body>
</html>

